---
import { Image } from '@astrojs/image/components'
import CardProyecto from './CardProyecto.astro'
import Tecnologias from './Tecnologias.astro'
import HTML from './Iconos/HTML.astro'
import CSS from './Iconos/CSS.astro'
import React from './Iconos/React.astro'

import { getCollection } from 'astro:content'

const proyectos = await getCollection('proyectos')
---

<section class="seccion">
	<header>
		<div class="typing">
			<h3>Proyectos</h3>
		</div>
	</header>

	<main class="contenido-proyectos">
		{
			proyectos.map((proyecto) => {
				const { data, slug } = proyecto
				const { title, image, tecnologias } = data

				return (
					<CardProyecto>
						<div class="contenedor-imagen-proyecto">
							<Image src={`/${image}`} alt={title} height={100} width={800} decoding="async" />
						</div>

						<div class="contenido-proyecto">
							<h3>{title}</h3>
							<p>{slug}</p>

							<ul class="example-2">
								{Object.keys(tecnologias).map((tecnologia) => {
									return (
										(tecnologia === 'HTML' && (
											<Tecnologias tecnologia={tecnologia}>
												<HTML />
											</Tecnologias>
										)) ||
										(tecnologia === 'CSS' && (
											<Tecnologias tecnologia={tecnologia}>
												<CSS />
											</Tecnologias>
										)) ||
										(tecnologia === 'React' && (
											<Tecnologias tecnologia={tecnologia}>
												<React />
											</Tecnologias>
										))
									)
								})}
							</ul>
						</div>
					</CardProyecto>
				)
			})
		}
	</main>
</section>

<style>
	.contenido-proyectos {
		display: flex;
		flex-direction: column;
		gap: 2rem;
		width: 85%;
	}

	.contenedor-imagen-proyecto {
		width: 50%;
	}

	.contenedor-imagen-proyecto img {
		width: clamp(30rem, 50vw, 100%);
		height: clamp(20rem, 50vw, 100%);
		aspect-ratio: 16 / 9;
		object-fit: contain;
	}

	.contenido-proyecto {
		width: 50%;
		display: flex;
		flex-direction: column;
		gap: 1rem;
	}

	.contenido-proyecto h3 {
		font-size: clamp(1.5rem, 5vw, 4rem);
		color: var(--cyan);
	}

	.contenido-proyecto p {
		font-size: clamp(1rem, 4vw, 1.7rem);
		color: var(--blanco);
		line-height: 1.5;
	}
	.example-2 {
		display: flex;
		justify-content: center;
		align-items: center;
	}
</style>
